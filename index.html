<!--
ë³€ê²½ ìš”ì•½
- 'ëª¨ë“  ìƒì˜ ìƒ‰' ì„¹ì…˜ì„ <details>ë¡œ ê°ì‹¸ ê¸°ë³¸ ì ‘í˜. summary í´ë¦­ ì‹œ í¼ì¹˜ê¸°/ì ‘ê¸°.
- summary ë‚´ë¶€ì— ì‹¤ì‹œê°„ ê°œìˆ˜ í‘œì‹œ( render() ì‹œ ê°±ì‹  ).
í™˜ê²½/ì˜ì¡´ì„±: ë‹¨ì¼ íŒŒì¼(ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ìŒ) Â· ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©(ì¦ê²¨ì°¾ê¸°/ìµœê·¼ ì„ íƒ)
-->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ë‚¨ì ìƒÂ·í•˜ì˜ ì»¬ëŸ¬ ë§¤ì¹­ â€“ ìµœì¢…ë³¸(ì ‘ê¸°/í¼ì¹˜ê¸°)</title>
  <style>
    :root{
      --bg:#0f1115; --card:#151924; --muted:#8992a5; --text:#e8ecf1; --accent:#5da9ff;
      --chip:#1e2330; --border:#212635; --ok:#66d19e; --safe:#9db2ff; --pro:#ffcf6e;
      --danger:#ff7a7a; --focus:#2b3a5c;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:var(--bg); color:var(--text);}
    .wrap{max-width:1080px; margin:24px auto; padding:16px}
    .header{display:flex; justify-content:space-between; gap:12px; align-items:center; margin-bottom:12px}
    .title{font-size:20px; font-weight:800}
    .sub{color:var(--muted); font-size:13px}
    .panel{background:var(--card); border:1px solid var(--border); border-radius:16px; padding:14px}
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .search{flex:1; min-width:260px; display:flex; gap:8px; align-items:center; background:#0e1119;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px}
    .search input{flex:1; background:transparent; border:0; outline:none; color:var(--text); font-size:15px}
    .btn{display:inline-flex; align-items:center; gap:8px; border:1px solid var(--border); background:#0e1119;
      color:var(--text); padding:10px 12px; border-radius:12px; cursor:pointer; user-select:none}
    .btn:hover{border-color:#3a4256}
    .btn.ghost{background:transparent}
    .hint{color:var(--muted); font-size:12px}
    .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); gap:10px}
    .card{background:#0e1119; border:1px solid var(--border); border-radius:14px; padding:12px; position:relative}
    .card .star{position:absolute; right:10px; top:10px; cursor:pointer; font-size:16px; opacity:.9}
    .card .star.fav{color:#ffd76b; text-shadow:0 0 8px #0006}
    .swatch{width:18px; height:18px; border-radius:4px; border:1px solid #0006; display:inline-block}
    .name{font-weight:700; margin-left:8px}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border:1px dashed var(--border);
      border-radius:10px; color:var(--muted); font-size:13px}
    .section{background:var(--card); border:1px solid var(--border); border-radius:16px; padding:14px}
    .sec-head{display:flex; justify-content:space-between; align-items:center; margin-bottom:8px}
    .tag{font-weight:800; font-size:14px}
    .ok{color:var(--ok)} .safe{color:var(--safe)} .pro{color:var(--pro)}
    .chips{display:flex; flex-wrap:wrap; gap:8px}
    .chip{display:inline-flex; align-items:center; gap:8px; background:var(--chip); border:1px solid var(--border);
      padding:8px 10px; border-radius:999px}
    .empty{color:#93a0ba}
    .toolbar{display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin:10px 0}
    .select{background:#0e1119; border:1px solid var(--border); color:var(--text); border-radius:10px; padding:8px}
    .hr{height:1px; background:var(--border); margin:12px 0}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace; background:#0e1119; border:1px solid var(--border); padding:2px 6px; border-radius:6px}
    @media (prefers-reduced-motion:no-preference){
      .card{transition:transform .08s ease}
      .card:hover{transform:translateY(-2px)}
    }
    /* details/summary ìŠ¤íƒ€ì¼ */
    details.section{padding:0}
    summary{
      list-style:none;
      cursor:pointer;
      padding:14px;
      border-radius:16px;
      display:flex; align-items:center; justify-content:space-between;
      background:var(--card); border:1px solid var(--border);
    }
    summary::-webkit-details-marker{display:none}
    .sum-left{display:flex; align-items:center; gap:10px}
    .chev{transition:transform .15s ease; opacity:.9}
    details[open] .chev{transform:rotate(90deg)}
    .sum-hint{color:var(--muted); font-size:12px}
    .inside{padding:14px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div>
        <div class="title">ë‚¨ì ìƒÂ·í•˜ì˜ ì»¬ëŸ¬ ë§¤ì¹­ Â· ìµœì¢…ë³¸</div>
        <div class="sub">ëª¨ë“  ìƒì˜ ìƒ‰ì€ ì ‘í˜(ê¸°ë³¸) Â· ì¦ê²¨ì°¾ê¸°(â˜…) Â· ì¦‰ì‹œ ì¶”ì²œ(ì°°ë–¡/ë¬´ë‚œ/ê³ ìˆ˜)</div>
      </div>
      <button class="btn ghost" id="resetBtn" title="ì´ˆê¸°í™”">ì´ˆê¸°í™”</button>
    </div>

    <!-- ê²€ìƒ‰/ë¹ ë¥¸ ì‹¤í–‰ íŒ¨ë„ -->
    <div class="panel">
      <div class="row">
        <div class="search" role="search">
          <span class="hint">ìƒì˜</span>
          <input id="topInput" list="colorList" placeholder="ì˜ˆ: ë²„ê±´ë””, ì°¨ì½œ, ë„¤ì´ë¹„, í™”ì´íŠ¸â€¦" aria-label="ìƒì˜ ìƒ‰ ì…ë ¥"/>
          <button class="btn" id="matchBtn">ì¶”ì²œ ë³´ê¸°</button>
        </div>
        <div class="pill">Tip: ìŠ¤ì™€ì¹˜ í´ë¦­ â†’ <span class="kbd">ìƒ‰ ì´ë¦„</span> ë³µì‚¬</div>
      </div>

      <div class="toolbar">
        <label class="hint">ì •ë ¬:
          <select id="sortSelect" class="select">
            <option value="name">ì´ë¦„ìˆœ(Aâ†’Z)</option>
            <option value="preset">í”„ë¦¬ì…‹(ìì£¼ì“°ëŠ”ìƒ‰ ìš°ì„ )</option>
          </select>
        </label>
        <label class="hint">í•„í„°:
          <select id="filterSelect" class="select">
            <option value="all">ì „ì²´</option>
            <option value="favorites">ì¦ê²¨ì°¾ê¸°ë§Œ</option>
            <option value="neutrals">ë‰´íŠ¸ëŸ´</option>
            <option value="warm">ì›œ</option>
            <option value="cool">ì¿¨</option>
            <option value="green">ê·¸ë¦°</option>
          </select>
        </label>
        <span class="hint">Enter ì‹¤í–‰ Â· ìµœê·¼ ì„ íƒ ìë™ ì €ì¥</span>
      </div>
    </div>

    <!-- ì¦ê²¨ì°¾ê¸° ì„¹ì…˜ -->
    <div id="favSection" class="section" style="display:none; margin-top:12px;">
      <div class="sec-head">
        <div class="tag">â˜… ì¦ê²¨ì°¾ê¸°</div>
        <div class="hint" id="favCount"></div>
      </div>
      <div id="favGrid" class="grid"></div>
    </div>

    <!-- ì „ì²´ ìƒ‰ìƒ ì„¹ì…˜ (ì ‘ê¸°/í¼ì¹˜ê¸°) -->
    <details id="allSection" class="section" style="margin-top:12px;">
      <summary>
        <div class="sum-left">
          <span class="chev">â–¶</span>
          <span class="tag">ëª¨ë“  ìƒì˜ ìƒ‰</span>
        </div>
        <div class="sum-hint" id="allCount">0ê°œ</div>
      </summary>
      <div class="inside">
        <datalist id="colorList"></datalist>
        <div id="allGrid" class="grid" aria-live="polite"></div>
      </div>
    </details>

    <!-- ê²°ê³¼ -->
    <div class="section" style="margin-top:12px;">
      <div class="sec-head">
        <div class="tag">ì¶”ì²œ í•˜ì˜</div>
        <div class="hint" id="recentHint">ìµœê·¼ ì„ íƒ: -</div>
      </div>
      <div id="resultArea"><p class="empty">ğŸ’¡ ìƒì˜ ìƒ‰ì„ ì„ íƒí•˜ë©´ í•˜ì˜ ì¶”ì²œì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p></div>
    </div>

    <div class="hr"></div>
    <div class="hint">í¸ì§‘: JSì˜ <span class="kbd">COLOR_MAP</span>ì„ ìˆ˜ì •í•˜ë©´ ì¦‰ì‹œ ë°˜ì˜ë©ë‹ˆë‹¤.</div>
  </div>

  <script>
    // ===== ìŠ¤ì™€ì¹˜ ìƒ‰ìƒ(hex) ì‚¬ì „(í‘œì‹œìš©) =====
    const COLOR_HEX = {
      "ë²„ê±´ë””":"##7A1F2B".replace('##','#'), "ë„¤ì´ë¹„":"#0E2C54", "ë¯¸ë“œ ê·¸ë ˆì´":"#8B8F98", "í¬ë ˆìŠ¤íŠ¸ ê·¸ë¦°":"#2F5D50",
      "í™”ì´íŠ¸":"#FFFFFF", "ì•„ì´ë³´ë¦¬":"#F5F0E6", "í¬ë¦¼":"#FAF3E5", "ë² ì´ì§€":"#D9C7A1",
      "ì°¨ì½œ":"#2B2F39", "ë¸”ë™":"#000000", "ë¸Œë¼ìš´":"#6E4C3A", "ëª¨ì¹´":"#7B5B48",
      "ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)":"#6C7A3C", "ì˜¬ë¦¬ë¸Œ":"#6C7A3C", "ê·¸ë¦°":"#2A8A4B", "ì„¸ì´ì§€ ê·¸ë¦°":"#8AA391",
      "ë¼ì´íŠ¸ ê·¸ë ˆì´":"#D7DBE0", "ê·¸ë ˆì´":"#8B8F98", "ìŠ¬ë ˆì´íŠ¸ ë¸”ë£¨":"#5B6E8A",
      "ì¤‘ì²­ ë°ë‹˜":"#274D7E", "í‘ì²­":"#31343C", "ë¼ì¼ë½":"#B79BCF", "í¼í”Œ":"#6441A5",
      "í•‘í¬":"#E7A8B3", "ì½”ë„":"#FF7F6E", "í…Œë¼ì½”íƒ€":"#C25A3A", "ë ˆë“œ":"#E53935",
      "ì˜¤ë Œì§€":"#F78C2F", "ì˜ë¡œìš°":"#FACF37", "ë²„í„° ì˜ë¡œ":"#F2E29D",
      "ì†Œë¼ìƒ‰":"#9EC5E8", "ë¼ì´íŠ¸ ë¸”ë£¨":"#AFC9F6", "ë¯¼íŠ¸":"#AEE4D4", "í‹¸(ì²­ë¡)":"#1C8073",
      "ê·¸ë ˆì´ì§€":"#BDB6A6", "ë”¥ë¸”ë£¨":"#0B3A7E", "ì—°ë‘ìƒ‰":"#9ED36A"
    };

    // ===== ìƒì˜ â†’ í•˜ì˜ ì¶”ì²œ ë§¤í•‘(ì°°ë–¡/ë¬´ë‚œ/ê³ ìˆ˜) =====
    const COLOR_MAP = {
      "ë²„ê±´ë””": { perfect:["ì•„ì´ë³´ë¦¬","ë„¤ì´ë¹„"], safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ë² ì´ì§€","ì˜ë¡œìš°","ê·¸ë ˆì´ì§€"] },
      "ë„¤ì´ë¹„": { perfect:["í™”ì´íŠ¸","ì•„ì´ë³´ë¦¬","ë¼ì´íŠ¸ ê·¸ë ˆì´"], safe:["ë„¤ì´ë¹„","ë¸”ë™"], pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","ë¸Œë¼ìš´"] },
      "ë¯¸ë“œ ê·¸ë ˆì´": { perfect:["ë¸”ë™","ë„¤ì´ë¹„"], safe:["ë¼ì´íŠ¸ ê·¸ë ˆì´","í‘ì²­","ì¤‘ì²­ ë°ë‹˜"], pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "í¬ë ˆìŠ¤íŠ¸ ê·¸ë¦°": { perfect:["ë¼ì´íŠ¸ ê·¸ë ˆì´","ì•„ì´ë³´ë¦¬"], safe:["ë„¤ì´ë¹„","ë¸”ë™"], pro:["ë² ì´ì§€","ë¸Œë¼ìš´"] },
      "í™”ì´íŠ¸": { perfect:["ë„¤ì´ë¹„","ë¸”ë™","ê·¸ë ˆì´"], safe:["ë¼ì´íŠ¸ ê·¸ë ˆì´","ì¤‘ì²­ ë°ë‹˜","í‘ì²­"], pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","ë¸Œë¼ìš´","ë² ì´ì§€"] },
      "ì†Œë¼ìƒ‰": { perfect:["ë„¤ì´ë¹„","ê·¸ë ˆì´"], safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "ë¸Œë¼ìš´": { perfect:["ì•„ì´ë³´ë¦¬","ë¼ì´íŠ¸ ê·¸ë ˆì´"], safe:["ë„¤ì´ë¹„","ë¸”ë™"], pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","ê·¸ë ˆì´ì§€"] },
      "ì°¨ì½œ": { perfect:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","ë¼ì´íŠ¸ ê·¸ë ˆì´"], safe:["ë¸”ë™","ë„¤ì´ë¹„","ê·¸ë ˆì´ì§€"], pro:["ë² ì´ì§€","ë¸Œë¼ìš´"] },
      "ì˜ë¡œìš°": { perfect:["ë„¤ì´ë¹„","ê·¸ë ˆì´"], safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ë¸Œë¼ìš´","ì•„ì´ë³´ë¦¬"] },
      "ë¸”ë™": { perfect:["ë¸”ë™","ì°¨ì½œ","ë¼ì´íŠ¸ ê·¸ë ˆì´"], safe:["ë„¤ì´ë¹„","í‘ì²­"], pro:["ë² ì´ì§€","ë¸Œë¼ìš´","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "ì—°ë‘ìƒ‰": { perfect:["ë„¤ì´ë¹„","ê·¸ë ˆì´"], safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ë² ì´ì§€"] },
      "ë”¥ë¸”ë£¨": { perfect:["ì•„ì´ë³´ë¦¬","ë¼ì´íŠ¸ ê·¸ë ˆì´"], safe:["ë¸”ë™","ë„¤ì´ë¹„"], pro:["ë² ì´ì§€"] },
      "ë ˆë“œ": { perfect:["ë„¤ì´ë¹„"], safe:["ë¸”ë™","ë² ì´ì§€"], pro:["ê·¸ë¦°","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "ë² ì´ì§€": { perfect:["ë„¤ì´ë¹„","ë¸”ë™"], safe:["ë¼ì´íŠ¸ ê·¸ë ˆì´","ì¤‘ì²­ ë°ë‹˜"], pro:["ë¸Œë¼ìš´","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "í•‘í¬": { perfect:["ê·¸ë ˆì´","ë„¤ì´ë¹„"], safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "ì•„ì´ë³´ë¦¬": { perfect:["ë„¤ì´ë¹„","ì°¨ì½œ"], safe:["ë¸”ë™","ê·¸ë ˆì´"], pro:["ë¸Œë¼ìš´","ì˜¬ë¦¬ë¸Œ"] },
      "í¼í”Œ": { perfect:["ë² ì´ì§€","ê·¸ë ˆì´"], safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","ì•„ì´ë³´ë¦¬"] },
      "ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)": { perfect:["ë¸”ë™","ì•„ì´ë³´ë¦¬"], safe:["í‘ì²­","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ë„¤ì´ë¹„","ë¸Œë¼ìš´","ë²„ê±´ë””"] },
      "ì¤‘ì²­ ë°ë‹˜": { perfect:["í™”ì´íŠ¸","ì•„ì´ë³´ë¦¬","ê·¸ë ˆì´"], safe:["ë¸”ë™","ë„¤ì´ë¹„"], pro:["ë² ì´ì§€"] },
      "ì˜¤ë Œì§€": { perfect:["ë„¤ì´ë¹„","ê·¸ë ˆì´"], safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "ë²„í„° ì˜ë¡œ": { perfect:["ë„¤ì´ë¹„","ê·¸ë ˆì´"], safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ë¸Œë¼ìš´"] },
      "ì„¸ì´ì§€ ê·¸ë¦°": { perfect:["ì•„ì´ë³´ë¦¬","ë¼ì´íŠ¸ ê·¸ë ˆì´"], safe:["ë„¤ì´ë¹„","ë¸”ë™"], pro:["ë² ì´ì§€","ë¸Œë¼ìš´"] },
      "ë¼ì¼ë½": { perfect:["ê·¸ë ˆì´","ë„¤ì´ë¹„"], safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ë² ì´ì§€"] },
      "ì½”ë„": { perfect:["í™”ì´íŠ¸","ê·¸ë ˆì´"], safe:["ë„¤ì´ë¹„","ë¸”ë™"], pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "í…Œë¼ì½”íƒ€": { perfect:["ì•„ì´ë³´ë¦¬","ê·¸ë ˆì´"], safe:["ë„¤ì´ë¹„","ë¸”ë™"], pro:["ë² ì´ì§€"] },
      "ëª¨ì¹´": { perfect:["ì•„ì´ë³´ë¦¬","ë¼ì´íŠ¸ ê·¸ë ˆì´"], safe:["ë¸”ë™","ë„¤ì´ë¹„"], pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","í‹¸(ì²­ë¡)"] },
      "ê·¸ë ˆì´ì§€": { perfect:["ë¸”ë™","ì°¨ì½œ"], safe:["ë„¤ì´ë¹„","ë¸Œë¼ìš´"], pro:["ë¯¼íŠ¸","í•‘í¬"] },
      "ìŠ¬ë ˆì´íŠ¸ ë¸”ë£¨": { perfect:["ë² ì´ì§€","ê·¸ë ˆì´"], safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "í‹¸(ì²­ë¡)": { perfect:["ë² ì´ì§€","ê·¸ë ˆì´"], safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "ë¯¼íŠ¸": { perfect:["ë„¤ì´ë¹„","ê·¸ë ˆì´"], safe:["ì°¨ì½œ","ë¸”ë™"], pro:["ë² ì´ì§€","ë¸Œë¼ìš´"] },
      "ë¼ì´íŠ¸ ê·¸ë ˆì´": { perfect:["ë¸”ë™","ë„¤ì´ë¹„"], safe:["ì¤‘ì²­ ë°ë‹˜","í‘ì²­"], pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "í‘ì²­": { perfect:["í™”ì´íŠ¸","ì•„ì´ë³´ë¦¬"], safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"], pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "í¬ë¦¼": { perfect:["ë„¤ì´ë¹„","ì°¨ì½œ"], safe:["ë¸”ë™","ê·¸ë ˆì´"], pro:["ë¸Œë¼ìš´","ì˜¬ë¦¬ë¸Œ"] },
      "ê·¸ë ˆì´": { perfect:["ë¸”ë™","ë„¤ì´ë¹„"], safe:["ë¼ì´íŠ¸ ê·¸ë ˆì´","í‘ì²­","ì¤‘ì²­ ë°ë‹˜"], pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"] },
      "ë¼ì´íŠ¸ ë¸”ë£¨": { perfect:["ë„¤ì´ë¹„","í™”ì´íŠ¸"], safe:["ë¸”ë™","ê·¸ë ˆì´"], pro:["ë² ì´ì§€","ì˜¬ë¦¬ë¸Œ"] },
      "ì˜¬ë¦¬ë¸Œ": { perfect:["ë¸”ë™","ì•„ì´ë³´ë¦¬"], safe:["ë„¤ì´ë¹„","ì°¨ì½œ"], pro:["ë²„ê±´ë””","ë ˆë“œ"] }
    };

    // ===== í”„ë¦¬ì…‹(ìì£¼ ì“°ëŠ” ìˆœ) =====
    const PRESET_ORDER = ["í™”ì´íŠ¸","ë¸”ë™","ë„¤ì´ë¹„","ì°¨ì½œ","ê·¸ë ˆì´","ë¼ì´íŠ¸ ê·¸ë ˆì´","ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","ë¸Œë¼ìš´","ë²„ê±´ë””","í•‘í¬","ë ˆë“œ","ì†Œë¼ìƒ‰","ë¼ì´íŠ¸ ë¸”ë£¨"];

    // ===== ìƒíƒœ ì €ì¥ í‚¤ =====
    const LS_KEYS = { fav:"favColors.v1", recent:"recentColor.v1" };

    // ===== ë„ìš°ë¯¸ =====
    const $ = (q)=>document.querySelector(q);
    function safeGetLS(key, fallback){
      try{ const v = localStorage.getItem(key); return v? JSON.parse(v): fallback; }catch{ return fallback; }
    }
    function safeSetLS(key, obj){
      try{ localStorage.setItem(key, JSON.stringify(obj)); }catch{}
    }

    // ===== ë°ì´í„° ì¤€ë¹„ =====
    const COLOR_NAMES = Object.keys(COLOR_MAP);
    function setDatalist(){
      const dl = $('#colorList'); dl.innerHTML='';
      COLOR_NAMES.forEach(n=>{ const o=document.createElement('option'); o.value=n; dl.appendChild(o); });
    }

    // ===== ì¹´ë“œ ìƒì„± & ì¦ê²¨ì°¾ê¸° =====
    function getFav(){ return new Set(safeGetLS(LS_KEYS.fav, [])); }
    function isFav(n){ return getFav().has(n); }
    function toggleFav(n){
      const s = getFav();
      if(s.has(n)) s.delete(n); else s.add(n);
      safeSetLS(LS_KEYS.fav, Array.from(s));
    }
    function makeCard(name){
      const card = document.createElement('div'); card.className='card'; card.dataset.name=name;

      const star = document.createElement('span');
      star.className='star'; star.title='ì¦ê²¨ì°¾ê¸°';
      star.textContent = isFav(name)? 'â˜…':'â˜†';
      if(isFav(name)) star.classList.add('fav');
      star.onclick = (e)=>{ e.stopPropagation(); toggleFav(name); render(); };

      const head = document.createElement('div'); head.className='row';
      const sw = document.createElement('span'); sw.className='swatch'; sw.style.background = COLOR_HEX[name] || '#9aa3b2';
      sw.title = `${name} (í´ë¦­í•˜ë©´ ì´ë¦„ ë³µì‚¬)`; sw.onclick = (e)=>{ e.stopPropagation(); navigator.clipboard?.writeText(name); };

      const nm = document.createElement('span'); nm.className='name'; nm.textContent=name;

      const sub = document.createElement('div'); sub.className='hint'; sub.style.marginTop='6px';
      sub.textContent = 'í´ë¦­í•˜ë©´ ì¶”ì²œ ë³´ê¸°';

      head.appendChild(sw); head.appendChild(nm);
      card.appendChild(star); card.appendChild(head); card.appendChild(sub);
      card.onclick = ()=>{ $('#topInput').value=name; showMatch(name); setRecent(name); };
      return card;
    }

    // ===== ìµœê·¼ ì„ íƒ =====
    function setRecent(n){ safeSetLS(LS_KEYS.recent, n); updateRecentHint(); }
    function getRecent(){ return safeGetLS(LS_KEYS.recent, null); }
    function updateRecentHint(){
      const r = getRecent();
      $('#recentHint').textContent = 'ìµœê·¼ ì„ íƒ: ' + (r || '-');
    }

    // ===== ë Œë”ë§ =====
    function render(){
      // ì¦ê²¨ì°¾ê¸° ì„¹ì…˜
      const favSet = getFav();
      const favArr = COLOR_NAMES.filter(n => favSet.has(n));
      const favSec = $('#favSection');
      const favGrid = $('#favGrid');
      if(favArr.length){
        favSec.style.display='block';
        $('#favCount').textContent = `${favArr.length}ê°œ`;
        favGrid.innerHTML=''; favArr.forEach(n=>favGrid.appendChild(makeCard(n)));
      }else{
        favSec.style.display='none';
      }

      // ì „ì²´(ì •ë ¬/í•„í„° ì ìš©) + ê°œìˆ˜ summary ê°±ì‹ 
      const sort = $('#sortSelect').value;
      const filt = $('#filterSelect').value;

      let arr = COLOR_NAMES.slice();
      if(filt==='favorites') arr = arr.filter(n=>favSet.has(n));
      else if(filt==='neutrals') arr = arr.filter(n=>["ë¸”ë™","ê·¸ë ˆì´","ë¼ì´íŠ¸ ê·¸ë ˆì´","ë„¤ì´ë¹„","ì•„ì´ë³´ë¦¬","ë² ì´ì§€","ì°¨ì½œ","í¬ë¦¼"].includes(n));
      else if(filt==='warm') arr = arr.filter(n=>["ë¸Œë¼ìš´","í…Œë¼ì½”íƒ€","ì˜¤ë Œì§€","ì˜ë¡œìš°","ë²„ê±´ë””","ëª¨ì¹´","ë²„í„° ì˜ë¡œ"].includes(n));
      else if(filt==='cool') arr = arr.filter(n=>["ì†Œë¼ìƒ‰","ë¼ì´íŠ¸ ë¸”ë£¨","ë”¥ë¸”ë£¨","ìŠ¬ë ˆì´íŠ¸ ë¸”ë£¨","í¼í”Œ","ë¼ì¼ë½","ë¯¼íŠ¸","í‹¸(ì²­ë¡)"].includes(n));
      else if(filt==='green') arr = arr.filter(n=>["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","ì˜¬ë¦¬ë¸Œ","í¬ë ˆìŠ¤íŠ¸ ê·¸ë¦°","ì„¸ì´ì§€ ê·¸ë¦°","ê·¸ë¦°","ì—°ë‘ìƒ‰"].includes(n));

      if(sort==='name') arr.sort((a,b)=>a.localeCompare(b,'ko'));
      else if(sort==='preset'){
        const idx = (n)=>{ const i = PRESET_ORDER.indexOf(n); return i===-1? 999: i; };
        arr.sort((a,b)=> idx(a)-idx(b) || a.localeCompare(b,'ko'));
      }

      // summaryì˜ ê°œìˆ˜ í…ìŠ¤íŠ¸ ê°±ì‹ 
      const allCount = document.getElementById('allCount');
      allCount.textContent = `${arr.length}ê°œ`;

      // ê·¸ë¦¬ë“œ ë Œë”
      const allGrid = $('#allGrid');
      allGrid.innerHTML=''; arr.forEach(n=>allGrid.appendChild(makeCard(n)));
    }

    // ===== ê²°ê³¼ í‘œì‹œ =====
    function chip(name){
      const div=document.createElement('span');
      div.className='chip';
      const hex = COLOR_HEX[name] || '#9aa3b2';
      div.innerHTML=`<span class="swatch" title="${name}" style="background:${hex}"></span>${name}`;
      div.querySelector('.swatch').addEventListener('click', ()=>navigator.clipboard?.writeText(name));
      return div;
    }

    function showMatch(name){
      const data = COLOR_MAP[name];
      const area = document.getElementById('resultArea'); area.innerHTML='';
      if(!data){
        const p=document.createElement('p'); p.className='empty';
        p.textContent = `ë“±ë¡ë˜ì§€ ì•Šì€ ìƒ‰ìƒì…ë‹ˆë‹¤: "${name}". ë¹„ìŠ·í•œ ìƒ‰ì„ ì„ íƒí•˜ê±°ë‚˜ COLOR_MAPì— ì¶”ê°€í•˜ì„¸ìš”.`;
        area.appendChild(p); return;
      }
      const head=document.createElement('div'); head.className='row'; head.style.marginBottom='6px';
      head.innerHTML = `<div class="pill">ì„ íƒí•œ ìƒì˜:
        <span class="swatch" style="margin-left:8px;background:${COLOR_HEX[name]||'#999'}"></span>
        <span style="margin-left:8px">${name}</span></div>`;
      area.appendChild(head);

      const grid=document.createElement('div'); grid.className='grid';
      const sec=(label,cls,arr)=>{
        const box=document.createElement('div'); box.className='panel';
        box.innerHTML = `<div class="sec-head"><div class="tag ${cls}">${label}</div><div class="hint">${arr.length}ê°œ</div></div>`;
        const wrap=document.createElement('div'); wrap.className='chips';
        (arr||[]).forEach(c=>wrap.appendChild(chip(c)));
        box.appendChild(wrap); grid.appendChild(box);
      };
      sec('ì°°ë–¡(ê°•ë ¥ ì¶”ì²œ)','ok', data.perfect||[]);
      sec('ë¬´ë‚œ(ì•ˆì „í•œ ì„ íƒ)','safe', data.safe||[]);
      sec('ê³ ìˆ˜ì˜ ì˜ì—­(í¬ì¸íŠ¸)','pro', data.pro||[]);
      area.appendChild(grid);
    }

    // ===== ì´ˆê¸°í™” & ì´ë²¤íŠ¸ =====
    function resetAll(){
      safeSetLS(LS_KEYS.fav, []);
      safeSetLS(LS_KEYS.recent, null);
      document.getElementById('topInput').value='';
      document.getElementById('filterSelect').value='all';
      document.getElementById('sortSelect').value='name';
      document.getElementById('resultArea').innerHTML='<p class="empty">ğŸ’¡ ìƒì˜ ìƒ‰ì„ ì„ íƒí•˜ë©´ í•˜ì˜ ì¶”ì²œì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>';
      render(); updateRecentHint();
      // ì „ì²´ ì„¹ì…˜ì€ ê¸°ë³¸ ì ‘í˜ ìœ ì§€
      const all = document.getElementById('allSection');
      if(all.open) all.removeAttribute('open');
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      setDatalist(); updateRecentHint(); render();

      // ìµœê·¼ ì„ íƒ ë³µì›(ìˆìœ¼ë©´ ë°”ë¡œ í‘œì‹œ)
      const recent = safeGetLS(LS_KEYS.recent, null);
      if(recent && COLOR_MAP[recent]){ document.getElementById('topInput').value=recent; showMatch(recent); }

      document.getElementById('matchBtn').addEventListener('click', ()=>{
        const v = document.getElementById('topInput').value.trim();
        if(!v){ document.getElementById('topInput').focus(); return; }
        showMatch(v); setRecent(v);
      });
      document.getElementById('topInput').addEventListener('keydown', (e)=>{
        if(e.key==='Enter'){ e.preventDefault(); document.getElementById('matchBtn').click(); }
      });
      document.getElementById('sortSelect').addEventListener('change', render);
      document.getElementById('filterSelect').addEventListener('change', render);
      document.getElementById('resetBtn').addEventListener('click', resetAll);
    });
  </script>
</body>
</html>
