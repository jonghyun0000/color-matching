<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ë‚¨ì ìƒÂ·í•˜ì˜ ì»¬ëŸ¬ ë§¤ì¹­ Â· í•µì‹¬5 + ë”ë³´ê¸°</title>
<style>
  :root{
    --bg:#0f1115; --card:#151924; --text:#e8ecf1; --muted:#93a0ba; --border:#212635;
    --chip:#1e2330; --ok:#66d19e; --safe:#9db2ff; --pro:#ffcf6e;
  }
  *{box-sizing:border-box}
  body{margin:0; background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .wrap{max-width:980px; margin:24px auto; padding:16px}
  .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
  .title{font-weight:800; font-size:20px; margin-bottom:8px}
  .panel,.section{background:var(--card); border:1px solid var(--border); border-radius:14px; padding:12px}
  .search{flex:1; min-width:260px; display:flex; gap:8px; align-items:center; background:#0e1119; border:1px solid var(--border); border-radius:10px; padding:10px 12px}
  .search input{flex:1; border:0; outline:none; background:transparent; color:var(--text); font-size:15px}
  .btn{border:1px solid var(--border); background:#0e1119; color:#e8ecf1; padding:10px 12px; border-radius:10px; cursor:pointer; transition:background .2s}
  .btn:hover{background:var(--border)}
  .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); gap:10px}
  .card{background:#0e1119; border:1px solid var(--border); border-radius:12px; padding:12px; position:relative; cursor:pointer}
  .swatch{width:18px; height:18px; border-radius:4px; border:1px solid #0006; display:inline-block}
  .name{font-weight:700; margin-left:8px}
  .star{position:absolute; right:10px; top:10px; font-size:16px; opacity:.9; cursor:pointer}
  .star.fav{color:#ffd76b; text-shadow:0 0 8px #0006}
  .tag{font-weight:800; font-size:14px}
  .chips{display:flex; flex-wrap:wrap; gap:8px}
  .chip{display:inline-flex; align-items:center; gap:8px; background:var(--chip); border:1px solid var(--border); padding:8px 10px; border-radius:999px; cursor:pointer; transition:background .2s}
  .chip:hover{background:var(--border)}
  .sec-head{display:flex; justify-content:space-between; align-items:center; margin-bottom:6px}
  .ok{color:var(--ok)} .safe{color:var(--safe)} .pro{color:var(--pro)}
  details.section{padding:0}
  summary{list-style:none; cursor:pointer; padding:12px; border-radius:14px; display:flex; align-items:center; justify-content:space-between}
  summary::-webkit-details-marker{display:none}
  .sum-left{display:flex; align-items:center; gap:8px}
  .chev{transition:transform .15s ease; opacity:.9}
  details[open] .chev{transform:rotate(90deg)}

  /* ===== [ì‹ ê·œ] ë¯¸ë¦¬ë³´ê¸° ìŠ¤íƒ€ì¼ ===== */
  .preview-wrap{display:flex; gap:10px; margin-bottom:12px; align-items:stretch}
  .preview{flex:1; min-width:80px; background:var(--bg); border:1px solid var(--border); border-radius:10px; display:flex; flex-direction:column; padding:4px}
  .preview-top, .preview-bottom{flex:1; border-radius:6px; transition:background-color .3s ease}
  .preview-top{background:#444; margin-bottom:3px}
  .preview-bottom{background:#555}
  .preview-info{flex:2; display:flex; flex-direction:column; justify-content:center}
  .preview-label{font-size:13px; color:var(--muted); margin-bottom:4px}
  .preview-color-name{font-size:16px; font-weight:700}
</style>
</head>
<body>
<div class="wrap">
  <div class="title">ë‚¨ì ìƒÂ·í•˜ì˜ ì»¬ëŸ¬ ë§¤ì¹­</div>

  <div class="panel" style="margin-bottom:12px;">
    <div class="row">
      <div class="search" role="search">
        <input id="topInput" list="colorList" placeholder="ìƒì˜ ìƒ‰ ì…ë ¥ (ì˜ˆ: ë²„ê±´ë””, ì°¨ì½œ, ë„¤ì´ë¹„ â€¦)" aria-label="ìƒì˜ ìƒ‰ ì…ë ¥"/>
        <button class="btn" id="matchBtn">ì¶”ì²œ ë³´ê¸°</button>
      </div>
      <button class="btn" id="resetBtn">ì´ˆê¸°í™”</button>
    </div>
  </div>

  <div id="favSection" class="section" style="display:none; margin-bottom:12px;">
    <div class="sec-head"><div class="tag">â˜… ì¦ê²¨ì°¾ê¸°</div><div id="favCount" class="muted"></div></div>
    <div id="favGrid" class="grid"></div>
  </div>

  <details id="allSection" class="section" open>
    <summary>
      <div class="sum-left"><span class="chev">â–¶</span><span class="tag">ëª¨ë“  ìƒì˜ ìƒ‰</span></div>
      <div id="allCount" class="muted">0ê°œ</div>
    </summary>
    <div style="padding:12px;">
      <div class="sec-head" style="margin-top:2px;"><div class="tag">í•µì‹¬ 5</div></div>
      <div id="coreGrid" class="grid" style="margin-bottom:8px;"></div>
      <details id="moreColors" class="section" style="margin-top:8px;">
        <summary>
          <div class="sum-left"><span class="chev">â–¶</span><span class="tag">ë”ë³´ê¸°</span></div>
          <div id="moreCount" class="muted">0ê°œ</div>
        </summary>
        <div style="padding:12px 12px 0 12px;"><div id="restGrid" class="grid"></div></div>
      </details>
      <datalist id="colorList"></datalist>
    </div>
  </details>

  <div id="resultSection" class="section" style="margin-top:12px;">
    <div class="sec-head"><div class="tag">ì¶”ì²œ í•˜ì˜</div><div id="recentHint" class="muted">ìµœê·¼ ì„ íƒ: -</div></div>
    <div id="resultArea"><p style="color:#93a0ba">ğŸ’¡ ìƒì˜ ìƒ‰ì„ ì„ íƒí•˜ë©´ í•˜ì˜ ì¶”ì²œì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p></div>
  </div>
</div>

<script>
/* ===== ë°ì´í„°: ìŠ¤ì™€ì¹˜ ìƒ‰, ìƒí•˜ì˜ ì¡°í•© ===== */
const COLOR_HEX = {"ë²„ê±´ë””":"#7A1F2B","ë„¤ì´ë¹„":"#0E2C54","ë¯¸ë“œ ê·¸ë ˆì´":"#8B8F98","í¬ë ˆìŠ¤íŠ¸ ê·¸ë¦°":"#2F5D50","í™”ì´íŠ¸":"#FFFFFF","ì•„ì´ë³´ë¦¬":"#F5F0E6","í¬ë¦¼":"#FAF3E5","ë² ì´ì§€":"#D9C7A1","ì°¨ì½œ":"#2B2F39","ë¸”ë™":"#000000","ë¸Œë¼ìš´":"#6E4C3A","ëª¨ì¹´":"#7B5B48","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)":"#6C7A3C","ì˜¬ë¦¬ë¸Œ":"#6C7A3C","ê·¸ë¦°":"#2A8A4B","ì„¸ì´ì§€ ê·¸ë¦°":"#8AA391","ë¼ì´íŠ¸ ê·¸ë ˆì´":"#D7DBE0","ê·¸ë ˆì´":"#8B8F98","ìŠ¬ë ˆì´íŠ¸ ë¸”ë£¨":"#5B6E8A","ì¤‘ì²­ ë°ë‹˜":"#274D7E","í‘ì²­":"#31343C","ë¼ì¼ë½":"#B79BCF","í¼í”Œ":"#6441A5","í•‘í¬":"#E7A8B3","ì½”ë„":"#FF7F6E","í…Œë¼ì½”íƒ€":"#C25A3A","ë ˆë“œ":"#E53935","ì˜¤ë Œì§€":"#F78C2F","ì˜ë¡œìš°":"#FACF37","ë²„í„° ì˜ë¡œ":"#F2E29D","ì†Œë¼ìƒ‰":"#9EC5E8","ë¼ì´íŠ¸ ë¸”ë£¨":"#AFC9F6","ë¯¼íŠ¸":"#AEE4D4","í‹¸(ì²­ë¡)":"#1C8073","ê·¸ë ˆì´ì§€":"#BDB6A6","ë”¥ë¸”ë£¨":"#0B3A7E","ì—°ë‘ìƒ‰":"#9ED36A"};
const COLOR_MAP = {"ë²„ê±´ë””":{perfect:["ì•„ì´ë³´ë¦¬","ë„¤ì´ë¹„"],safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ë² ì´ì§€","ì˜ë¡œìš°","ê·¸ë ˆì´ì§€"]},"ë„¤ì´ë¹„":{perfect:["í™”ì´íŠ¸","ì•„ì´ë³´ë¦¬","ë¼ì´íŠ¸ ê·¸ë ˆì´"],safe:["ë„¤ì´ë¹„","ë¸”ë™"],pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","ë¸Œë¼ìš´"]},"ë¯¸ë“œ ê·¸ë ˆì´":{perfect:["ë¸”ë™","ë„¤ì´ë¹„"],safe:["ë¼ì´íŠ¸ ê·¸ë ˆì´","í‘ì²­","ì¤‘ì²­ ë°ë‹˜"],pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"í¬ë ˆìŠ¤íŠ¸ ê·¸ë¦°":{perfect:["ë¼ì´íŠ¸ ê·¸ë ˆì´","ì•„ì´ë³´ë¦¬"],safe:["ë„¤ì´ë¹„","ë¸”ë™"],pro:["ë² ì´ì§€","ë¸Œë¼ìš´"]},"í™”ì´íŠ¸":{perfect:["ë„¤ì´ë¹„","ë¸”ë™","ê·¸ë ˆì´"],safe:["ë¼ì´íŠ¸ ê·¸ë ˆì´","ì¤‘ì²­ ë°ë‹˜","í‘ì²­"],pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","ë¸Œë¼ìš´","ë² ì´ì§€"]},"ì†Œë¼ìƒ‰":{perfect:["ë„¤ì´ë¹„","ê·¸ë ˆì´"],safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"ë¸Œë¼ìš´":{perfect:["ì•„ì´ë³´ë¦¬","ë¼ì´íŠ¸ ê·¸ë ˆì´"],safe:["ë„¤ì´ë¹„","ë¸”ë™"],pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","ê·¸ë ˆì´ì§€"]},"ì°¨ì½œ":{perfect:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","ë¼ì´íŠ¸ ê·¸ë ˆì´"],safe:["ë¸”ë™","ë„¤ì´ë¹„","ê·¸ë ˆì´ì§€"],pro:["ë² ì´ì§€","ë¸Œë¼ìš´"]},"ì˜ë¡œìš°":{perfect:["ë„¤ì´ë¹„","ê·¸ë ˆì´"],safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ë¸Œë¼ìš´","ì•„ì´ë³´ë¦¬"]},"ë¸”ë™":{perfect:["ë¸”ë™","ì°¨ì½œ","ë¼ì´íŠ¸ ê·¸ë ˆì´"],safe:["ë„¤ì´ë¹„","í‘ì²­"],pro:["ë² ì´ì§€","ë¸Œë¼ìš´","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"ì—°ë‘ìƒ‰":{perfect:["ë„¤ì´ë¹„","ê·¸ë ˆì´"],safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ë² ì´ì§€"]},"ë”¥ë¸”ë£¨":{perfect:["ì•„ì´ë³´ë¦¬","ë¼ì´íŠ¸ ê·¸ë ˆì´"],safe:["ë¸”ë™","ë„¤ì´ë¹„"],pro:["ë² ì´ì§€"]},"ë ˆë“œ":{perfect:["ë„¤ì´ë¹„"],safe:["ë¸”ë™","ë² ì´ì§€"],pro:["ê·¸ë¦°","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"ë² ì´ì§€":{perfect:["ë„¤ì´ë¹„","ë¸”ë™"],safe:["ë¼ì´íŠ¸ ê·¸ë ˆì´","ì¤‘ì²­ ë°ë‹˜"],pro:["ë¸Œë¼ìš´","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"í•‘í¬":{perfect:["ê·¸ë ˆì´","ë„¤ì´ë¹„"],safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"ì•„ì´ë³´ë¦¬":{perfect:["ë„¤ì´ë¹„","ì°¨ì½œ"],safe:["ë¸”ë™","ê·¸ë ˆì´"],pro:["ë¸Œë¼ìš´","ì˜¬ë¦¬ë¸Œ"]},"í¼í”Œ":{perfect:["ë² ì´ì§€","ê·¸ë ˆì´"],safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","ì•„ì´ë³´ë¦¬"]},"ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)":{perfect:["ë¸”ë™","ì•„ì´ë³´ë¦¬"],safe:["í‘ì²­","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ë„¤ì´ë¹„","ë¸Œë¼ìš´","ë²„ê±´ë””"]},"ì¤‘ì²­ ë°ë‹˜":{perfect:["í™”ì´íŠ¸","ì•„ì´ë³´ë¦¬","ê·¸ë ˆì´"],safe:["ë¸”ë™","ë„¤ì´ë¹„"],pro:["ë² ì´ì§€"]},"ì˜¤ë Œì§€":{perfect:["ë„¤ì´ë¹„","ê·¸ë ˆì´"],safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"ë²„í„° ì˜ë¡œ":{perfect:["ë„¤ì´ë¹„","ê·¸ë ˆì´"],safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ë¸Œë¼ìš´"]},"ì„¸ì´ì§€ ê·¸ë¦°":{perfect:["ì•„ì´ë³´ë¦¬","ë¼ì´íŠ¸ ê·¸ë ˆì´"],safe:["ë„¤ì´ë¹„","ë¸”ë™"],pro:["ë² ì´ì§€","ë¸Œë¼ìš´"]},"ë¼ì¼ë½":{perfect:["ê·¸ë ˆì´","ë„¤ì´ë¹„"],safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ë² ì´ì§€"]},"ì½”ë„":{perfect:["í™”ì´íŠ¸","ê·¸ë ˆì´"],safe:["ë„¤ì´ë¹„","ë¸”ë™"],pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"í…Œë¼ì½”íƒ€":{perfect:["ì•„ì´ë³´ë¦¬","ê·¸ë ˆì´"],safe:["ë„¤ì´ë¹„","ë¸”ë™"],pro:["ë² ì´ì§€"]},"ëª¨ì¹´":{perfect:["ì•„ì´ë³´ë¦¬","ë¼ì´íŠ¸ ê·¸ë ˆì´"],safe:["ë¸”ë™","ë„¤ì´ë¹„"],pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)","í‹¸(ì²­ë¡)"]},"ê·¸ë ˆì´ì§€":{perfect:["ë¸”ë™","ì°¨ì½œ"],safe:["ë„¤ì´ë¹„","ë¸Œë¼ìš´"],pro:["ë¯¼íŠ¸","í•‘í¬"]},"ìŠ¬ë ˆì´íŠ¸ ë¸”ë£¨":{perfect:["ë² ì´ì§€","ê·¸ë ˆì´"],safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"í‹¸(ì²­ë¡)":{perfect:["ë² ì´ì§€","ê·¸ë ˆì´"],safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"ë¯¼íŠ¸":{perfect:["ë„¤ì´ë¹„","ê·¸ë ˆì´"],safe:["ì°¨ì½œ","ë¸”ë™"],pro:["ë² ì´ì§€","ë¸Œë¼ìš´"]},"ë¼ì´íŠ¸ ê·¸ë ˆì´":{perfect:["ë¸”ë™","ë„¤ì´ë¹„"],safe:["ì¤‘ì²­ ë°ë‹˜","í‘ì²­"],pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"í‘ì²­":{perfect:["í™”ì´íŠ¸","ì•„ì´ë³´ë¦¬"],safe:["ë¸”ë™","ë¼ì´íŠ¸ ê·¸ë ˆì´"],pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"í¬ë¦¼":{perfect:["ë„¤ì´ë¹„","ì°¨ì½œ"],safe:["ë¸”ë™","ê·¸ë ˆì´"],pro:["ë¸Œë¼ìš´","ì˜¬ë¦¬ë¸Œ"]},"ê·¸ë ˆì´":{perfect:["ë¸”ë™","ë„¤ì´ë¹„"],safe:["ë¼ì´íŠ¸ ê·¸ë ˆì´","í‘ì²­","ì¤‘ì²­ ë°ë‹˜"],pro:["ë² ì´ì§€","ì¹´í‚¤(ì˜¬ë¦¬ë¸Œ)"]},"ë¼ì´íŠ¸ ë¸”ë£¨":{perfect:["ë„¤ì´ë¹„","í™”ì´íŠ¸"],safe:["ë¸”ë™","ê·¸ë ˆì´"],pro:["ë² ì´ì§€","ì˜¬ë¦¬ë¸Œ"]},"ì˜¬ë¦¬ë¸Œ":{perfect:["ë¸”ë™","ì•„ì´ë³´ë¦¬"],safe:["ë„¤ì´ë¹„","ì°¨ì½œ"],pro:["ë²„ê±´ë””","ë ˆë“œ"]}};

/* ===== ìƒíƒœ ì €ì¥ ===== */
const LS = { fav:"favColors.v1", recent:"recentColor.v1" };
const $ = s=>document.querySelector(s);
function gLS(k,f){ try{const v=localStorage.getItem(k); return v?JSON.parse(v):f;}catch{return f;}}
function sLS(k,v){ try{localStorage.setItem(k,JSON.stringify(v));}catch{} }

/* ===== ì´ë¦„ ëª©ë¡/í•µì‹¬5/ë‚˜ë¨¸ì§€ ===== */
const NAMES = Object.keys(COLOR_MAP).sort((a,b)=>a.localeCompare(b,'ko'));
const CORE = ["ë¸”ë™","ì°¨ì½œ","ë²„ê±´ë””","ì˜¬ë¦¬ë¸Œ","í™”ì´íŠ¸"];
const REST = NAMES.filter(n=>!CORE.includes(n));

function setDatalist(){
  $('#colorList').innerHTML = NAMES.map(n => `<option value="${n}"></option>`).join('');
}

/* ===== ì¦ê²¨ì°¾ê¸° ===== */
function favSet(){ return new Set(gLS(LS.fav, [])); }
function isFav(n){ return favSet().has(n); }
function toggleFav(n){ const s=favSet(); s.has(n)?s.delete(n):s.add(n); sLS(LS.fav,[...s]); renderAll(); }

/* ===== ì¹´ë“œ ìƒì„± ===== */
function makeCard(name){
  const card = document.createElement('div');
  card.className = 'card';
  card.dataset.name = name;
  card.innerHTML = `
    <span class="star ${isFav(name)?'fav':''}">${isFav(name)?'â˜…':'â˜†'}</span>
    <div class="row">
      <span class="swatch" style="background:${COLOR_HEX[name]||'#9aa3b2'}" title="${name}"></span>
      <span class="name">${name}</span>
    </div>`;
  
  card.querySelector('.star').addEventListener('click', (e) => {
    e.stopPropagation();
    toggleFav(name);
  });

  card.addEventListener('click', () => {
    $('#topInput').value = name;
    showMatch(name);
    sLS(LS.recent, name);
    updateRecent();

    if (CORE.includes(name)) return;
    const more = $('#moreColors');
    if (more && more.open) more.removeAttribute('open');
    else $('#allSection')?.removeAttribute('open');
  });
  return card;
}

/* ===== ë Œë”ë§ ===== */
function renderAll(){
  // ì¦ê²¨ì°¾ê¸°
  const fset = favSet();
  const favArr = NAMES.filter(n => fset.has(n));
  const favSec = $('#favSection');
  if(favArr.length){
    favSec.style.display = 'block';
    $('#favCount').textContent = `${favArr.length}ê°œ`;
    const favGrid = $('#favGrid'); favGrid.innerHTML = '';
    favArr.forEach(n => favGrid.appendChild(makeCard(n)));
  } else {
    favSec.style.display = 'none';
  }

  // í•µì‹¬ ë° ë‚˜ë¨¸ì§€
  const coreGrid = $('#coreGrid'); coreGrid.innerHTML = '';
  CORE.forEach(n => coreGrid.appendChild(makeCard(n)));
  
  const restGrid = $('#restGrid'); restGrid.innerHTML = '';
  REST.forEach(n => restGrid.appendChild(makeCard(n)));
  $('#moreCount').textContent = `${REST.length}ê°œ`;
  $('#allCount').textContent = `ì´ ${NAMES.length}ê°œ`;
}

/* ===== ê²°ê³¼ í‘œì‹œ ===== */
function showMatch(name){
  const data = COLOR_MAP[name];
  const area = $('#resultArea');
  if (!data) {
    area.innerHTML = `<p style="color:#93a0ba">ë“±ë¡ë˜ì§€ ì•Šì€ ìƒ‰ìƒ: "${name}"</p>`;
    return;
  }
  
  const topHex = COLOR_HEX[name] || '#999';
  const firstBottomName = (data.perfect && data.perfect[0]) || (data.safe && data.safe[0]) || 'ë¯¸ì„ íƒ';
  const firstBottomHex = COLOR_HEX[firstBottomName] || '#555';

  // [ê°œì„ ] í…œí”Œë¦¿ ë¦¬í„°ëŸ´ë¡œ UI êµ¬ì¡° ìƒì„±
  area.innerHTML = `
    <div class="preview-wrap">
      <div class="preview">
        <div id="previewTop" class="preview-top" style="background:${topHex}"></div>
        <div id="previewBottom" class="preview-bottom" style="background:${firstBottomHex}"></div>
      </div>
      <div class="preview-info">
        <div class="preview-label">ìƒì˜</div>
        <div class="preview-color-name">${name}</div>
        <div class="preview-label" style="margin-top:8px;">í•˜ì˜</div>
        <div id="bottomColorName" class="preview-color-name">${firstBottomName}</div>
      </div>
    </div>
    <div id="recoGrid" class="grid"></div>`;

  const recoGrid = $('#recoGrid');
  const createSection = (label, cls, arr) => {
    if (!arr || arr.length === 0) return '';
    return `
      <div class="panel">
        <div class="sec-head"><div class="tag ${cls}">${label}</div><div class="muted">${arr.length}ê°œ</div></div>
        <div class="chips">
          ${arr.map(c => `
            <div class="chip" data-color="${c}">
              <span class="swatch" style="background:${COLOR_HEX[c] || '#9aa3b2'}"></span>${c}
            </div>`).join('')}
        </div>
      </div>`;
  };
  
  recoGrid.innerHTML = createSection('ì°°ë–¡','ok',data.perfect) +
                       createSection('ë¬´ë‚œ','safe',data.safe) +
                       createSection('ê³ ìˆ˜','pro',data.pro);
}

function updateRecent(){
  const r = gLS(LS.recent, null);
  $('#recentHint').textContent = 'ìµœê·¼ ì„ íƒ: ' + (r || '-');
}

/* ===== ì´ˆê¸°í™” & ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ===== */
function resetAll(){
  sLS(LS.fav, []);
  sLS(LS.recent, null);
  $('#topInput').value = '';
  $('#resultArea').innerHTML = '<p style="color:#93a0ba">ğŸ’¡ ìƒì˜ ìƒ‰ì„ ì„ íƒí•˜ë©´ í•˜ì˜ ì¶”ì²œì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>';
  renderAll();
  updateRecent();
  $('#allSection').setAttribute('open','');
  $('#moreColors').removeAttribute('open');
}

document.addEventListener('DOMContentLoaded', () => {
  setDatalist();
  renderAll();
  updateRecent();

  const recent = gLS(LS.recent, null);
  if (recent && COLOR_MAP[recent]) {
    $('#topInput').value = recent;
    showMatch(recent);
  }

  $('#matchBtn').addEventListener('click', () => {
    const v = $('#topInput').value.trim();
    if (!v) { $('#topInput').focus(); return; }
    showMatch(v);
    sLS(LS.recent, v);
    updateRecent();

    const more = $('#moreColors');
    if (more && more.open) more.removeAttribute('open');
    else $('#allSection')?.removeAttribute('open');
  });

  $('#topInput').addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      e.preventDefault();
      $('#matchBtn').click();
    }
  });

  $('#resetBtn').addEventListener('click', resetAll);

  // [ê°œì„ ] ì´ë²¤íŠ¸ ìœ„ì„: í•˜ì˜ ìƒ‰ìƒ ì¹© í´ë¦­ ì‹œ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
  $('#resultArea').addEventListener('click', (e) => {
    const chip = e.target.closest('.chip');
    if (!chip) return;

    const bottomColorName = chip.dataset.color;
    if (bottomColorName) {
      $('#previewBottom').style.backgroundColor = COLOR_HEX[bottomColorName] || '#555';
      $('#bottomColorName').textContent = bottomColorName;
    }
  });
});
</script>
</body>
</html>
